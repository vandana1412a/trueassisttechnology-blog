---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post }
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout>
  <main class="page">
    <header class="hero">
      <p class="eyebrow">{new Date(post.data.pubDate).toLocaleDateString()}</p>
      <h1>{post.data.title}</h1>
      <p class="muted">{post.data.description}</p>
      {post.data.tags && (
        <div class="tags">
          {post.data.tags.map((tag) => (
            <span class="tag">{tag}</span>
          ))}
        </div>
      )}
    </header>

    <article class="post">
      <Content />
    </article>
  </main>
</Layout>

<style>
  .page {
    max-width: 960px;
    margin: 0 auto;
    padding: 42px 18px 96px;
  }
  .hero {
    background: linear-gradient(135deg, rgba(59, 31, 95, 0.96), rgba(76, 43, 118, 0.94));
    color: #fff;
    padding: 24px;
    border-radius: 16px;
    box-shadow: 0 18px 48px rgba(59, 31, 95, 0.18);
    margin-bottom: 18px;
  }
  .hero h1 {
    margin: 4px 0 8px;
    font-size: clamp(28px, 4vw, 38px);
  }
  .muted {
    color: rgba(255, 255, 255, 0.9);
    margin: 0;
  }
  .eyebrow {
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-size: 12px;
    font-weight: 800;
    color: #d9c8f0;
    margin: 0 0 6px;
  }
  .tags {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-top: 10px;
  }
  .tag {
    padding: 6px 10px;
    background: rgba(255, 255, 255, 0.14);
    border: 1px solid rgba(255, 255, 255, 0.28);
    border-radius: 999px;
    font-weight: 700;
    color: #f3eafa;
    font-size: 12px;
  }
  .post {
    background: #fff;
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 24px;
    box-shadow: 0 16px 32px rgba(59, 31, 95, 0.08);
    color: var(--text);
    line-height: 1.7;
  }
  .post h2, .post h3, .post h4 {
    color: var(--text);
  }
  .post code {
    background: #f4f4f4;
    padding: 2px 6px;
    border-radius: 4px;
  }
  @media (max-width: 620px) {
    .page { padding: 28px 14px 64px; }
    .hero { padding: 20px; }
    .post { padding: 18px; }
  }
</style>
