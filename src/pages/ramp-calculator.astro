---
import BaseLayout from "../layouts/BaseLayout.astro";
import RelatedPosts from "../components/RelatedPosts.astro";

const metaTitle = "Ramp Calculator | Ramp Slope Ratio Calculator | Slope Calculator for Ramp";
const metaDescription =
  "Use this ramp calculator and ramp slope ratio calculator to size a safe ramp. Learn how to calculate ramp slope, check incline angles, and find portable ramp options.";

const currentSlug = "ramp-calculator";
const base = import.meta.env.BASE_URL.endsWith("/")
  ? import.meta.env.BASE_URL
  : `${import.meta.env.BASE_URL}/`;
---

<BaseLayout title={metaTitle} description={metaDescription} headerVariant="solid">
  <section class="two-col">
    <div class="col calc-col" aria-labelledby="calc-title">
      <div class="ramp-illustration">
        <img src={`${base}images/rampplus.jpeg`} alt="Wheelchair using a portable ramp" />
      </div>

      <section id="ramp-calculator" class="calc-card" aria-label="Ramp calculator">
        <h2 id="calc-title">Ramp Calculator</h2>

        <div class="field-row">
          <label for="riseInput">Rise (Step Height)</label>
          <div class="inline-field">
            <input type="number" id="riseInput" placeholder="e.g. 6" />
            <select id="riseUnit" aria-label="Rise unit">
              <option value="in">in</option>
              <option value="cm">cm</option>
              <option value="mm">mm</option>
              <option value="ft">ft</option>
              <option value="m">m</option>
            </select>
          </div>
        </div>

        <div class="field-row">
          <label for="userType">Ramp user type</label>
          <select id="userType">
            <option value="manual" data-ratio="12">Manual Wheelchair - 1:12</option>
            <option value="elderly" data-ratio="10">Elderly / Walker - 1:10</option>
            <option value="powered" data-ratio="8">Powered Wheelchair - 1:8</option>
            <option value="caregiver" data-ratio="6">Caregiver Assisted - 1:6</option>
            <option value="trolley" data-ratio="4">Trolley / Vehicle - 1:4</option>
            <option value="custom">Custom Slope</option>
          </select>
        </div>

        <div class="user-type-visuals" aria-live="polite">
          <div class="user-type-image active" data-type="manual">
          <img src={`${base}images/manual.png`} alt="Manual wheelchair ramp reference" />
          </div>
          <div class="user-type-image" data-type="elderly">
          <img src={`${base}images/elderly.png`} alt="Elderly or walker ramp reference" />
          </div>
          <div class="user-type-image" data-type="powered">
          <img src={`${base}images/powered.png`} alt="Powered wheelchair ramp reference" />
          </div>
          <div class="user-type-image" data-type="caregiver">
          <img src="https://www.trueassistech.com/TurnPlus.jpeg" alt="TurnPlus swivel seat reference" />
          </div>
          <div class="user-type-image" data-type="trolley">
          <img src={`${base}images/trolley.png`} alt="Trolley or vehicle ramp reference" />
          </div>
        </div>

        <div class="field-row custom-ratio" id="customRatioWrap" hidden>
          <label for="customRatio">Custom slope ratio (1:x)</label>
          <input type="number" id="customRatio" placeholder="e.g. 14" />
        </div>

        <div class="field-row output-row">
          <label for="slopeAngle">Slope (theta)</label>
          <div class="inline-field">
            <input id="slopeAngle" readonly />
            <select disabled aria-label="Slope angle unit">
              <option>degrees</option>
            </select>
          </div>
        </div>

        <div class="field-row output-row">
          <label for="lengthOutput">Ramp Length</label>
          <div class="inline-field">
            <input id="lengthOutput" readonly />
            <select id="lengthUnit" aria-label="Ramp length unit">
              <option value="ft">ft</option>
              <option value="in">in</option>
              <option value="cm">cm</option>
              <option value="mm">mm</option>
              <option value="m">m</option>
            </select>
          </div>
        </div>

        <button id="calcButton" class="calc-btn" type="button" disabled>Calculate Ramp Length</button>
        <p id="resultsError" class="error" role="alert" hidden></p>
      </section>

      <section class="recommendations" aria-label="Recommended ramps">
        <p id="warning" class="warning" hidden>
          Note: Portable ramps can be max 6 ft. Longer ramps may be unsafe or unusable.
        </p>
        <div id="products" class="product-carousel" hidden>
          <a class="product-card" href="https://www.trueassistech.com/products/ramplus-portable-suitcase-ramps" target="_blank">
            <div class="video-frame">
              <iframe src="https://www.youtube.com/embed/nILzXFC6yjA" title="RamPlus - Portable Suitcase Ramp" loading="lazy" allowfullscreen></iframe>
            </div>
            <div>
              <h4>RamPlus - Portable Suitcase Ramps</h4>
              <p class="muted">Compact suitcase ramp for quick setup.</p>
            </div>
          </a>
          <a class="product-card" href="https://www.trueassistech.com/products/ramplus-portable-split-ramps" target="_blank">
            <div class="video-frame">
              <iframe src="https://www.youtube.com/embed/iR98HFQj9lE" title="RamPlus - Portable Split Ramps" loading="lazy" allowfullscreen></iframe>
            </div>
            <div>
              <h4>RamPlus - Portable Split Ramps</h4>
              <p class="muted">Split design for easy transport and placement.</p>
            </div>
          </a>
          <a class="product-card" href="https://www.trueassistech.com/products/ramplus-threshold-ramps" target="_blank">
            <div class="product-image">
              <img src="https://www.trueassistech.com/RamPlus03T-Product.jpeg" alt="RamPlus Threshold Ramp" loading="lazy" />
            </div>
            <div>
              <h4>RamPlus - Threshold Ramp</h4>
              <p class="muted">Smooth small rises at doors and thresholds.</p>
            </div>
          </a>
          <a class="product-card" href="https://www.trueassistech.com/products/roller-ramps-imported" target="_blank">
            <div class="product-image">
              <img src="https://www.trueassistech.com/RamPlus04R-Product.jpeg" alt="Roller Ramps - Imported" loading="lazy" />
            </div>
            <div>
              <h4>Roller Ramps - Imported</h4>
              <p class="muted">Durable roll-out ramps for heavier loads.</p>
            </div>
          </a>
        </div>
      </section>
    </div>

    <div class="col content-col" aria-label="Ramp calculator guidance">
      <article class="content">
        <h2>What is a Ramp &amp; Why Use a Ramp Calculator</h2>
        <p>
          A ramp provides a smooth, safer path for wheelchairs, walkers, and trolleys. A ramp calculator ensures the ramp
          slope ratio you choose is comfortable and compliant. Using a ramp calculator, ramp slope ratio calculator, or
          slope calculator for ramp helps you avoid overly steep inclines that can cause strain or safety risks.
        </p>

        <h3>How to Use the Ramp Calculator (step by step)</h3>
        <ul>
          <li>Enter the rise in inches, centimeters, millimeters, feet, or meters.</li>
          <li>Select a user type to apply the recommended slope ratio.</li>
          <li>If needed, pick Custom Slope and enter your own ratio.</li>
          <li>Click Calculate to see ramp length and slope angle.</li>
          <li>Review the recommended ramps when the length is within 6 ft.</li>
        </ul>

        <h3>Ramp Length Formula and Slope Ratio Explanation</h3>
        <p>
          The ramp length formula is simple: <strong>Run = Rise x Ratio</strong>. If your rise is 6 inches and you choose
          a 1:12 slope ratio, the required run is 72 inches (6 ft). The slope calculator for ramp uses this formula to
          show the result instantly and teaches how to calculate ramp slope for different ratios.
        </p>
        <ul>
          <li><strong>1:12</strong> (manual wheelchair): gentle, ADA-aligned baseline.</li>
          <li><strong>1:10</strong> (elderly / walker): moderate slope for short rises.</li>
          <li><strong>1:8</strong> (powered wheelchair): steeper but manageable for powered devices.</li>
          <li><strong>1:6</strong> (caregiver assisted): only for short rises with support.</li>
          <li><strong>1:4</strong> (trolley / vehicle): non-wheelchair contexts with strong traction.</li>
        </ul>

        <h3>Incline Angle Calculation</h3>
        <p>
          The ramp slope calculator also shows the incline angle using the arctangent of rise divided by run. Lower angles
          mean smoother access. Most wheelchair ramp slope calculator results keep angles under 5 degrees for comfort.
        </p>

        <h3>Standard Guidelines (ADA, CPWD, WHO, UK)</h3>
        <ul>
          <li><strong>ADA (US):</strong> 1:12 for accessible routes; landings every 30 ft of run.</li>
          <li><strong>CPWD (India):</strong> common guidance aligns to 1:12; handrails and kerbs recommended.</li>
          <li><strong>WHO:</strong> promotes gentle slopes (around 1:12) for universal access.</li>
          <li><strong>UK (Approved Document M):</strong> typically 1:12 up to short rises; requires rest landings.</li>
        </ul>

        <h3>Safety Notes and Recommendations</h3>
        <ul>
          <li>Keep surfaces non-slip and clear of debris or moisture.</li>
          <li>Use edge protection or kerbs to prevent wheels from slipping off.</li>
          <li>Provide handrails for users who walk with support.</li>
          <li>Check doorway thresholds; add threshold ramps where needed.</li>
          <li>Follow weight and length limits: portable ramps are often safest under 6 ft.</li>
        </ul>

        <h3>Conclusion</h3>
        <p>
          A precise ramp ratio calculator helps you design safer access for every user. Use this ramp slope calculator to
          size ramps correctly, verify incline angles, and choose the right TrueAssist ramp products for lasting mobility
          and accessibility.
        </p>
      </article>
    </div>
  </section>

  <RelatedPosts currentSlug={currentSlug} />
</BaseLayout>

<style>
  .two-col {
    display: grid;
    grid-template-columns: 2fr 3fr;
    gap: 1.25rem;
    align-items: start;
  }

  .col {
    width: 100%;
  }

  .ramp-illustration {
    border: 1px solid var(--border);
    border-radius: 12px;
    background: #fff;
    box-shadow: var(--shadow);
    margin-bottom: 1rem;
    overflow: hidden;
  }

  .ramp-illustration img {
    width: 100%;
    height: auto;
    object-fit: contain;
    display: block;
  }

  .calc-card {
    width: 100%;
    padding: 20px;
    background: #f9f9f9;
    border-radius: 12px;
    border: 1px solid #818385;
    display: grid;
    gap: 0.85rem;
  }

  .calc-card h2 {
    text-align: left;
    color: #451e5d;
    margin: 0 0 0.25rem;
  }

  .field-row {
    display: grid;
    gap: 0.35rem;
  }

  .inline-field {
    display: grid;
    grid-template-columns: 1fr 100px;
    gap: 0.5rem;
    align-items: center;
  }

  .output-row .inline-field {
    grid-template-columns: 1fr 110px;
  }

  .calc-card input,
  .calc-card select {
    width: 100%;
    padding: 8px;
    border: 1px solid #818385;
    border-radius: 6px;
    font: inherit;
    background: #fff;
  }

  .user-type-visuals {
    display: grid;
    gap: 0.5rem;
  }

  .user-type-image {
    display: none;
    border: 1px solid var(--border);
    border-radius: 10px;
    background: #fff;
    padding: 0.75rem;
  }

  .user-type-image.active {
    display: block;
  }

  .user-type-image img {
    width: 100%;
    height: auto;
    max-height: 300px;
    object-fit: contain;
    display: block;
  }

  .custom-ratio {
    gap: 0.4rem;
  }

  .calc-btn {
    margin-top: 0.3rem;
    padding: 12px 16px;
    background-color: #451e5d;
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 700;
    cursor: pointer;
  }

  .calc-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .error {
    color: #b42318;
    margin: 0;
    font-weight: 600;
  }

  .recommendations {
    display: grid;
    gap: 0.75rem;
    margin-top: 1rem;
  }

  .warning {
    margin: 0;
    padding: 0.75rem;
    border-radius: 10px;
    background: #fff4d9;
    color: #8a5a00;
    font-weight: 600;
  }

  .product-carousel {
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: minmax(220px, 1fr);
    gap: 0.75rem;
    overflow-x: auto;
    padding-bottom: 0.5rem;
    scroll-snap-type: x mandatory;
  }

  .product-card {
    display: grid;
    gap: 0.5rem;
    padding: 0.75rem;
    border-radius: 10px;
    border: 1px solid var(--border);
    background: #fff;
    text-decoration: none;
    scroll-snap-align: start;
  }

  .product-art {
    height: 80px;
    border-radius: 10px;
    background: linear-gradient(135deg, rgba(69, 30, 93, 0.1), rgba(69, 30, 93, 0.02));
  }

  .product-card h4 {
    margin: 0;
    color: #451e5d;
  }

  .content {
    background: #fff;
    border: 1px solid #818385;
    border-radius: 12px;
    padding: 1.25rem;
    display: grid;
    gap: 1rem;
  }

  .content h2,
  .content h3 {
    color: #451e5d;
    margin: 0;
  }

  .content ul {
    list-style: disc;
    padding-left: 1.2rem;
    margin: 0.35rem 0 0;
  }

  .content li {
    margin: 0.15rem 0;
  }

  @media (max-width: 900px) {
    .two-col {
      grid-template-columns: 1fr;
    }
  }
</style>

<script is:inline>
const riseInput = document.getElementById("riseInput");
const riseUnit = document.getElementById("riseUnit");
const userType = document.getElementById("userType");
const customRatioWrap = document.getElementById("customRatioWrap");
const customRatio = document.getElementById("customRatio");
const calcButton = document.getElementById("calcButton");
const resultsError = document.getElementById("resultsError");

const slopeAngle = document.getElementById("slopeAngle");
const lengthOutput = document.getElementById("lengthOutput");
const lengthUnit = document.getElementById("lengthUnit");

const warning = document.getElementById("warning");
const products = document.getElementById("products");
const userTypeImages = document.querySelectorAll(".user-type-image");

function convertToInches(value, unit) {
  switch (unit) {
    case "cm":
      return value / 2.54;
    case "mm":
      return value / 25.4;
    case "m":
      return value * 39.37;
    case "ft":
      return value * 12;
    default:
      return value;
  }
}

function convertFromInches(value, unit) {
  switch (unit) {
    case "cm":
      return value * 2.54;
    case "mm":
      return value * 25.4;
    case "m":
      return value * 0.0254;
    case "ft":
      return value / 12;
    default:
      return value;
  }
}

function updateUserType() {
  const isCustom = userType.value === "custom";
  const selected = userType.value;

  userTypeImages.forEach((image) => {
    image.classList.toggle("active", image.dataset.type === selected);
  });

  if (isCustom) {
    customRatioWrap.hidden = false;
  } else {
    customRatioWrap.hidden = true;
    customRatio.value = "";
  }
  updateButtonState();
}

function updateButtonState() {
  const riseValue = parseFloat(riseInput.value);
  const customValue = parseFloat(customRatio.value);
  const isCustom = userType.value === "custom";
  const validRise = riseValue > 0;
  const validRatio = isCustom ? customValue > 0 : true;
  calcButton.disabled = !(validRise && validRatio);
}

function showError(message) {
  resultsError.textContent = message;
  resultsError.hidden = false;
  warning.hidden = true;
  products.hidden = true;
}

function clearError() {
  resultsError.hidden = true;
}

function calculate() {
  const riseValue = parseFloat(riseInput.value);
  const ratioValue = userType.selectedOptions[0].dataset.ratio;
  const isCustom = userType.value === "custom";
  const customValue = parseFloat(customRatio.value);

  if (!riseValue || riseValue <= 0) {
    showError("Please enter a valid rise value.");
    return;
  }

  const slopeValue = isCustom ? customValue : parseFloat(ratioValue);
  if (!slopeValue || slopeValue <= 0) {
    showError("Please enter a valid slope ratio.");
    return;
  }

  clearError();

  const heightInInches = convertToInches(riseValue, riseUnit.value);
  const rampLengthInInches = heightInInches * slopeValue;
  const rampLengthFeet = rampLengthInInches / 12;
  const angle = (Math.atan(heightInInches / rampLengthInInches) * (180 / Math.PI)).toFixed(2);

  slopeAngle.value = angle;
  lengthOutput.value = convertFromInches(rampLengthInInches, lengthUnit.value).toFixed(2);

  if (rampLengthFeet > 6) {
    warning.hidden = false;
    products.hidden = true;
  } else {
    warning.hidden = true;
    products.hidden = false;
  }
}

function updateOutputs() {
  if (calcButton.disabled) return;
  calculate();
}

userType.addEventListener("change", updateUserType);
riseInput.addEventListener("input", updateButtonState);
customRatio.addEventListener("input", updateButtonState);
lengthUnit.addEventListener("change", updateOutputs);
calcButton.addEventListener("click", calculate);

updateUserType();
</script>
